from getmac import get_mac_address as gma
import paho.mqtt.client as mqtt
from random import randrange, uniform
import time
import datetime

macaddr = gma()

mqttBroker ="mqtt.eclipseprojects.io"

sensor = mqtt.Client("sensor")

sensor.connect(mqttBroker)

while True:
    current_time = datetime.datetime.now()

    randTemperature = uniform(60, 70)
    randPressure = uniform(99820, 99835)
    randHumidity = uniform(80, 100)
    randAlt = uniform(125, 126)
    sensor.publish("4c:1d:96:a4:f7:0e/Temperature", randTemperature)
    sensor.publish("4c:1d:96:a4:f7:0e/Pressure", randPressure)
    sensor.publish("4c:1d:96:a4:f7:0e/Humidity", randHumidity)
    sensor.publish("4c:1d:96:a4:f7:0e/Altitude", randAlt)
    print("Just published " + str(randTemperature) + " to topic Temperature, " + str(randPressure) + " to topic Pressure, " + str(randHumidity) + " to topic Humidity, " + str(randAlt) + " to topic Altitude " + " at time " + str(current_time))
    time.sleep(1)
